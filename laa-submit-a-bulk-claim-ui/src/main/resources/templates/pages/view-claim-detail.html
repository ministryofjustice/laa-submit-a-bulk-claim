<!DOCTYPE HTML>
<html lang="en" class="govuk-template" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{ layout/main-layout :: layout(#{viewClaim.heading},~{::main},~{::#back-link},'search-submissions')}">

<!--/*@thymesVar id="values" type="uk.gov.justice.laa.bulkclaim.dto.submission.claim.BulkClaimCostItem"*/-->
<tr class="govuk-table__row" th:fragment="fee-detail-row(title, values, notes)"
    th:with="rowStyle=${rowStyle?:null}">
  <th scope="row" class="govuk-table__header" th:classappend="${rowStyle} ? __${rowStyle}__ : ''"
      th:text="${title}"/>
  <td class="govuk-table__cell govuk-table__cell--numeric"
      th:classappend="${rowStyle} ? ${rowStyle} : ''">
    <th:block th:if="${values != null and values.enteredValue != null}"
              th:text="|£${values.enteredValue}|"/>
    <th:block th:unless="${values != null and values.enteredValue != null}"
              th:aria-label="#{viewClaim.feeCalculation.na}"
              th:text="#{viewClaim.feeCalculation.naAbbr}"/>
  </td>
  <td class="govuk-table__cell govuk-table__cell--numeric"
      th:classappend="${rowStyle} ? ${rowStyle} : ''">
    <th:block th:if="${values != null and values.calculatedValue != null}"
              th:text="|£${values.calculatedValue}|"/>
    <th:block th:unless="${values != null and values.calculatedValue != null}">£0.00</th:block>
  </td>
  <td class="govuk-table__cell" th:classappend="${rowStyle} ? ${rowStyle} : ''"
      th:text="${notes}"/>
</tr>

<th:block th:fragment="summary-row(title, value)">
  <span class="govuk-!-font-weight-bold" th:text="|${title}:|"/>
  <th:block th:text="${value}"/>
</th:block>
<th:block id="back-link">
  <a th:href="@{/submission/{submissionId}(submissionId=${submissionId})}" class="govuk-back-link"
     th:text="#{common.back}"/>
</th:block>
<main class="govuk-main-wrapper" id="main-content">

  <div class="govuk-width-container">
    <div class="govuk-grid-row">

      <div class="govuk-grid-column-full" data-module="laa-print-button">
        <h1 class="govuk-heading-l"
            th:text="#{viewClaim.heading(${ufn})}"/>
      </div>

      <div class="govuk-grid-column-two-thirds">
        <p class="govuk-body" th:if="${claimSummary.areaOfLaw == 'CIVIL'}">
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientForename}, ${claimSummary.clientForename})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientSurname}, ${claimSummary.clientSurname()})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.ufn}, ${claimSummary.uniqueFileNumber})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.ucn}, ${claimSummary.uniqueClientNumber})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.feeCode}, ${claimSummary.feeCode})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.escapedCase}, ${claimSummary.isEscaped()} ? 'Yes' : 'No')}"/>
        </p>
        <p class="govuk-body" th:if="${claimSummary.areaOfLaw == 'CRIME'}">
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientSurname}, ${claimSummary.clientSurname})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientInitial}, #strings.substring(claimSummary.clientForename,0, 1))}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.ufn}, ${claimSummary.uniqueFileNumber})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.matterType}, ${claimSummary.matterTypeCode})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.stageReached}, ${claimSummary.stageReachedCode})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.outcomeCode}, ${claimSummary.outcomeCode})}"/>
          </br>
          <th:block th:replace="~{::summary-row(#{viewClaim.summary.dateOfWorkConcluded}, ${#temporals.format(claimSummary.caseConcludedDate(),'dd MMM YYYY')})}"/>
        </p>
        <p class="govuk-body" th:if="${claimSummary.areaOfLaw == 'MEDIATION'}">
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientForename1}, ${claimSummary.clientForename})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientSurname1}, ${claimSummary.clientSurname})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.ucn1}, ${claimSummary.uniqueClientNumber})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientForename2}, ${claimSummary.client2Forename})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.clientSurname2}, ${claimSummary.client2Surname()})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.ucn2}, ${claimSummary.uniqueClientNumber2})}"/>
          </br>
          <th:block
              th:replace="~{::summary-row(#{viewClaim.summary.feeCode}, ${claimSummary.feeCode})}"/>

        </p>
      </div>

      <div class="govuk-grid-column-full" th:unless="${claimMessages?.messages?.isEmpty()}">
        <div th:each="warning : ${claimMessages.messages}"  role="region" class="moj-alert moj-alert--warning moj-alert--with-heading"
             th:aria-label="#{viewClaim.summary.warningAlertAriaLabel(${warning.message()})}" data-module="moj-alert">
          <div>
            <svg class="moj-alert__icon" role="presentation" focusable="false" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" height="30" width="30">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M15 2.44922L28.75 26.1992H1.25L15 2.44922ZM13.5107 9.49579H16.4697L16.2431 17.7678H13.7461L13.5107 9.49579ZM13.1299 21.82C13.1299 21.5661 13.1787 21.3285 13.2764 21.1071C13.374 20.8793 13.5075 20.6807 13.6768 20.5114C13.8525 20.3421 14.0544 20.2087 14.2822 20.111C14.5101 20.0134 14.7542 19.9645 15.0146 19.9645C15.2686 19.9645 15.5062 20.0134 15.7275 20.111C15.9554 20.2087 16.154 20.3421 16.3232 20.5114C16.4925 20.6807 16.626 20.8793 16.7236 21.1071C16.8213 21.3285 16.8701 21.5661 16.8701 21.82C16.8701 22.0804 16.8213 22.3246 16.7236 22.5524C16.626 22.7803 16.4925 22.9789 16.3232 23.1481C16.154 23.3174 15.9554 23.4509 15.7275 23.5485C15.5062 23.6462 15.2686 23.695 15.0146 23.695C14.7542 23.695 14.5101 23.6462 14.2822 23.5485C14.0544 23.4509 13.8525 23.3174 13.6768 23.1481C13.5075 22.9789 13.374 22.7803 13.2764 22.5524C13.1787 22.3246 13.1299 22.0804 13.1299 21.82Z" fill="currentColor" />
            </svg>
          </div>
          <div class="moj-alert__content" th:text="${warning.message()}"/>
          <div class="moj-alert__action">
            <button class="moj-alert__dismiss" hidden>Dismiss</button>
          </div>
        </div>

      </div>
      <div class="govuk-grid-column-full">
        <table class="govuk-table">
          <caption class="govuk-table__caption govuk-table__caption--m"
                   th:text="#{viewClaim.feeCalculation.subheading}"/>
          <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header"
                th:text="#{viewClaim.feeCalculation.columnTitle.bulkClaimItem}"/>
            <th scope="col" class="govuk-table__header govuk-table__header--numeric"
                th:text="#{viewClaim.feeCalculation.columnTitle.enteredValue}"/>
            <th scope="col" class="govuk-table__header govuk-table__header--numeric"
                th:text="#{viewClaim.feeCalculation.columnTitle.calculatedValue}"/>
            <th scope="col" class="govuk-table__header"
                th:text="#{viewClaim.feeCalculation.columnTitle.notes}"/>
          </tr>
          </thead>
          <tbody class="govuk-table__body">
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.fixedFee},
              ${feeDetails.fixedFee}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.netProfitCost},
              ${feeDetails.netProfitCost}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.netDisbursements},
              ${feeDetails.netDisbursments}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.disbursementVat},
              ${feeDetails.netDisbursments}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.netCostOfCounsel},
              ${feeDetails.netCostOfCounsel},
              #{viewClaim.feeCalculation.notes.immigrationAsylumDiscriminationOnly})}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.travelAndWaitingCosts},
              ${feeDetails.travelAndWaitingCosts},
              #{viewClaim.feeCalculation.notes.crimeOnly})}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.adjournedHearingFee},
              ${feeDetails.adjournedHearingFee},
              #{viewClaim.feeCalculation.notes.immigrationAsylumMentalHealthOnly})}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.jrFormFilling},
              ${feeDetails.jrFormFilling}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.detentionTravelWaitingCosts},
              ${feeDetails.detentionTravelAndWaitingCosts}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.cmrhTelephone},
              ${feeDetails.cmrhTelephone}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.cmrhOral},
              ${feeDetails.cmrhOral},
              #{viewClaim.feeCalculation.notes.immigrationAsylumOnly})}"/>
          <th:block
              th:replace="~{::fee-detail-row(#{viewClaim.feeCalculation.row.homeOfficeInterview},
              ${feeDetails.homeOfficeInterview}, null)}"/>
          <th:block
              th:replace="~{::fee-detail-row(title=#{viewClaim.feeCalculation.row.vat},
              values=${feeDetails.vat},notes=null, rowStyle='sabc-govuk-table\_\_cell\_\_bold-bottom')}"/>
          <!--Total-->
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header sabc-govuk-table__cell__bold-bottom"
                th:text="#{viewClaim.feeCalculation.row.total}"/>
            <td class="govuk-table__cell sabc-govuk-table__cell__bold-bottom govuk-table__cell--numeric"
                th:aria-label="#{viewClaim.feeCalculation.na}"/>
            <td class="govuk-table__cell sabc-govuk-table__cell__bold-bottom govuk-table__cell--numeric"
                th:text="|£${feeDetails.calculatedTotal}|"/>
            <td class="govuk-table__cell sabc-govuk-table__cell__bold-bottom"/>
          </tr>

          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
</html>
